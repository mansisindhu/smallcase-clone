
const smallcasesData = [
    {
        name: "All Weather Investing",
        minAmount: 4417,
        shortDescription: "One investment for all market conditions. Works for everyone",
        longDescription1: "All Weather Investing is a popular strategy that ensures your investments do well in good as well as bad times. This is a long-term investment strategy that you can use to build wealth over the years to come.",
        listElement1: "This smallcase invests in 3 asset classes--equity, debt and gold",
        listElement2: "The portfolio is rebalanced periodically to generate relatively higher returns by assuming the least possible risks",
        longDescription2: "This smallcase is ideal for all types of market conditions. It will ensure that neither will your investment ship sink, nor will the investment flight soar to scary heights. What you will get here is a steady ride to help you meet your long-term investment goals.",
        votalityType: "Low Volatility",
        image: "https://assets.smallcase.com/images/smallcases/200/SCAW_0001.png",
        cagr: 13.87,
        cagrYear: "3Y CAGR"
    },
    {
        name: "Equity & Gold",
        minAmount: 262,
        shortDescription: "Create wealth with equities, stay protected with Gold. The sweet spot",
        longDescription1: "This smallcase invests in Equity & Gold, fixing their weights to 70% and 30%. smallcase invests in large-cap companies using Nippon India ETF Nifty Bees",
        listElement1: "Large cap companies are usually well established and the chances of such companies going bust are low",
        listElement2: "Adding such stocks to the portfolio increases stability of the portfolio as their stock prices are not very volatile. They are also best suited for long term wealth creation",
        longDescription2: "Historically gold has maintained its value and is the best form of hedge against inflation and geo-political uncertainties. Since price of gold is negatively correlated with price of stock, the former is a very effective portfolio diversifier.",
        votalityType: "Low Volatility",
        image: "https://assets.smallcase.com/images/smallcases/160/SCET_0005.png",
        cagr: 19.93,
        cagrYear: "3Y CAGR"
    },
    {
        name: "Dividend Aristocrats",
        minAmount: 56284,
        longDescription1: "For long-term investors, dividend returns are very important as they are an additional income that is earned over and above the capital gains earned by holding onto the stock.",
        shortDescription: "Companies that have been consistently increasing dividends. Extra goodness",
        listElement1: "This smallcase consists of companies that have increased their dividend payout consecutively for the last 10 years.",
        listElement2: "Adding such stocks to the portfolio increases stability of the portfolio as their stock prices are not very volatile. They are also best suited for long term wealth creation",
        longDescription2: "Stock returns consist of two parts--price return and dividend return. An investor can earn back a significant portion of the investment in the form of dividends, before selling the stock.",
        votalityType: "Med. Volatility",
        image: "https://assets.smallcase.com/images/smallcases/160/SCMO_0014.png",
        cagr: 22.30,
        cagrYear: "5Y CAGR"
    },
    {
        name: "The Great Indian Middle Class - Low-Cost Version",
        minAmount: 53864,
        longDescription1: "India is an emerging economy with a growing middle class with 45 crore people expected to be added to this category in the next 15 years.",
        shortDescription: "Companies focused on the growing middle class. Running India's consumption engine",
        listElement1: "Rise in middle class population leads to increased discretionary income, which is the portion of individual’s income that is left after spending on necessities like food and rent",
        listElement2: "This income gets spent on luxury items like skin care products, branded clothes, entertainment, etc",
        longDescription2: "This smallcase includes companies that are expected to benefit from the growth in the Indian middle class.",
        votalityType: "Med. Volatility",
        image: "https://assets.smallcase.com/images/smallcases/200/SCNM_0011.png",
        cagr: 18.92,
        cagrYear: "5Y CAGR"
    },
    {
        name: "Electric Mobility",
        minAmount: 51865,
        longDescription1: "The government plans to achieve the sale of 60-70 lakh hybrid and electric vehicles every year from 2020 onwards. In January 2013, the National Electric Mobility Mission Plan (NEMMP 2020) was announced to incentivise the use and production of electric vehicles",
        shortDescription: "Companies driving India's transition to electric vehicles. Transport's new era",
        listElement1: "Government also adopted the FAME India scheme to support the market development and manufacturing of electric vehicles",
        listElement2: "This scheme will focus on technology development, pilot projects, demand creation and charging infrastructure",
        longDescription2: "This smallcase comprises companies that are investing in the electric vehicle ecosystem and are expected to grow with growth in electric mobility.",
        votalityType: "Med. Volatility",
        image: "https://assets.smallcase.com/images/smallcases/200/SCNM_0025.png",
        cagr: -0.03,
        cagrYear: "4Y CAGR"
    },
    {
        name: "Safe Haven",
        minAmount: 21062,
        longDescription1: "Beta is a measure of volatility. A beta of less than 1 indicates that the stock is less volatile than the market. Good quality, low beta stocks ensure that the portfolio is not very sensitive to market selloffs.",
        shortDescription: "Low beta stocks that are rated ‘BUY’, to help protect against market volatility",
        listElement1: "This smallcase has low beta stocks that are rated ‘BUY’ by more than 65% of the research analyst covering them",
        listElement2: "Also, these stocks have witnessed an increase in the number of shares held by financial institutions like mutual funds in last 3 months",
        longDescription2: "Use this smallcase to protect your portfolio against market volatility",
        votalityType: "Med. Volatility",
        image: "https://assets.smallcase.com/images/smallcases/200/SCMO_0015.png",
        cagr: 19.87,
        cagrYear: "5Y CAGR"
    },
    {
        name: "Rising Rural Demand",
        minAmount: 42186,
        longDescription1: "Consumption in rural India is growing at 1.5 times the rate in urban India.",
        shortDescription: "Companies that stand to benefit from increasing rural consumption",
        listElement1: "As part of Budget 2021-22, the total outlay towards major agriculture and rural development projects stands at ₹2.30 lakh crore",
        listElement2: "The volume of institutional credit for the agriculture sector is raised to ₹16.5 lakh crore from ₹15 lakh crore last year, with a focus on ensuring increased credit flows to animal husbandry, dairy, and fisheries",
        longDescription2: "This smallcase has companies that either derive a significant amount of their revenue from rural India or are striving to enhance their foothold across rural markets to benefit from increasing rural demand.",
        votalityType: "High Volatility",
        image: "https://assets.smallcase.com/images/smallcases/200/SCNM_0012.png",
        cagr: 16.69,
        cagrYear: "5Y CAGR"
    },
    {
        name: "Top 100 Stocks",
        minAmount: 953,
        longDescription1: "smallcase invests in top 100 marketcap companies using Nippon India ETF Nifty Bees for top 50 companies and Nippon India ETF Junior Bees for 51-100 marketcap companies",
        shortDescription: "India's most powerful companies in one portfolio. Solid stability",
        listElement1: "Large cap companies are usually well established and the chances of such companies going bust are low",
        listElement2: "Adding such stocks to the portfolio increases stability of the portfolio as their stock prices are not very volatile. They are also best suited for long term wealth creation",
        longDescription2: "This smallcase has companies that either derive a significant amount of their revenue from rural India or are striving to enhance their foothold across rural markets to benefit from increasing rural demand.",
        votalityType: "Med. Volatility",
        image: "https://assets.smallcase.com/images/smallcases/200/SCET_0004.png",
        cagr: 18.52,
        cagrYear: "3Y CAGR"
    },
    {
        name: "IT Tracker",
        minAmount: 87390,
        longDescription1: "The global IT & ITeS market reached US$ 3.9 trillion in 2019-20, while the global sourcing market reached around US$ 200-250 billion. India remained the world’s top sourcing destination in 2019-20 with a share of 55%. Indian IT exports are estimated to be at around US$147 billion. The contribution of the IT sector to India’s GDP stood at 7.7% in 2020.",
        shortDescription: "Companies to efficiently track and invest in the IT sector",
        listElement1: "Indian IT & ITeS companies have set up over 1,000 global delivery centers in over 80 cities around the world.",
        listElement2: "Revenues of the IT Business Process Management industry are estimated to be at around US$ 191 billion in FY 2019-20. The industry is expected to grow to US$ 350 billion by 2025",
        longDescription2: "This smallcase comprises IT & ITeS and online services companies to allow investors to efficiently track and invest in the information technology sector.",
        votalityType: "High Volatility",
        image: "https://assets.smallcase.com/images/smallcases/160/SCMO_0016.png",
        cagr: 29.37,
        cagrYear: "5Y CAGR"
    }
]

const smallcasesArrayToBeSorted = Object.assign([], smallcasesData);

const smallcaseDiv = document.querySelector(".smallcases");

let current_array = smallcasesData;

let count = 0;

const filterHeadingElement = document.querySelector("#filter-content");

filterHeadingElement.textContent = `Filters(${count})`


// Clear all filters
const clearAllElement = document.querySelector("#clearFilters");

clearAllElement.addEventListener("click", function () {
    minimumAmountBtnElement.removeAttribute("id", "filter-icon-blue");
    popularityBtnElement.removeAttribute("id", "filter-icon-blue");
    returnsBtnElement.removeAttribute("id", "filter-icon-blue");

    under50kFilterBtnElement.removeAttribute("id", "filter-icon-blue");
    under25kFilterBtnElement.removeAttribute("id", "filter-icon-blue");
    under5kFilterBtnElement.removeAttribute("id", "filter-icon-blue");
    anyFilterBtnElement.removeAttribute("id", "filter-icon-blue");

    mediumVolatilityBtnElement.removeAttribute("id", "volatility-btn-blue");
    highVolatilityBtnElement.removeAttribute("id", "volatility-btn-blue");
    lowVolatilityBtnElement.removeAttribute("id", "volatility-btn-blue");

    count = 0;

    filterHeadingElement.textContent = `Filters(${count})`

    renderSmallcases(smallcasesData)
})



//sorting by types
const popularityBtnElement = document.querySelector(".popularity");

popularityBtnElement.addEventListener("click", function () {
    minimumAmountBtnElement.removeAttribute("id", "filter-icon-blue");
    popularityBtnElement.setAttribute("id", "filter-icon-blue");
    returnsBtnElement.removeAttribute("id", "filter-icon-blue");

    count++;

    filterHeadingElement.textContent = `Filters(${count})`
    renderSmallcases(current_array);
})

const minimumAmountBtnElement = document.querySelector(".minimum-amount");

minimumAmountBtnElement.addEventListener("click", function () {
    minimumAmountBtnElement.setAttribute("id", "filter-icon-blue");
    popularityBtnElement.removeAttribute("id", "filter-icon-blue");
    returnsBtnElement.removeAttribute("id", "filter-icon-blue");

    const sorted = current_array.sort(function (a, b) {
        return a.minAmount - b.minAmount;
    })

    current_array = sorted;
    renderSmallcases(current_array);
    count++;

    filterHeadingElement.textContent = `Filters(${count})`
})

const returnsBtnElement = document.querySelector(".returns");

returnsBtnElement.addEventListener("click", function () {
    minimumAmountBtnElement.removeAttribute("id", "filter-icon-blue");
    popularityBtnElement.removeAttribute("id", "filter-icon-blue");
    returnsBtnElement.setAttribute("id", "filter-icon-blue");

    const sorted = current_array.sort(function (a, b) {
        return b.cagr - a.cagr;
    })

    current_array = sorted;

    renderSmallcases(current_array);
    count++;

    filterHeadingElement.textContent = `Filters(${count})`
})



//sorting by minimum amount
const anyFilterBtnElement = document.querySelector(".any");

anyFilterBtnElement.addEventListener("click", function () {
    under50kFilterBtnElement.removeAttribute("id", "filter-icon-blue");
    under25kFilterBtnElement.removeAttribute("id", "filter-icon-blue");
    under5kFilterBtnElement.removeAttribute("id", "filter-icon-blue");
    anyFilterBtnElement.setAttribute("id", "filter-icon-blue");

    current_array = smallcasesData;

    renderSmallcases(current_array);
    count++;

    filterHeadingElement.textContent = `Filters(${count})`
})


const under5kFilterBtnElement = document.querySelector(".under5k");

under5kFilterBtnElement.addEventListener("click", function () {
    under50kFilterBtnElement.removeAttribute("id", "filter-icon-blue");
    under25kFilterBtnElement.removeAttribute("id", "filter-icon-blue");
    anyFilterBtnElement.removeAttribute("id", "filter-icon-blue");
    under5kFilterBtnElement.setAttribute("id", "filter-icon-blue");


    const filteredArray = current_array.filter(function (el) {
        if (el.minAmount < 5000) {
            return el;
        }
    }).sort(function (a, b) {
        return a.minAmount - b.minAmount;
    })

    current_array = filteredArray

    renderSmallcases(current_array);
    count++;

    filterHeadingElement.textContent = `Filters(${count})`
})


const under25kFilterBtnElement = document.querySelector(".under25k");

under25kFilterBtnElement.addEventListener("click", function () {
    under50kFilterBtnElement.removeAttribute("id", "filter-icon-blue");
    anyFilterBtnElement.removeAttribute("id", "filter-icon-blue");
    under5kFilterBtnElement.removeAttribute("id", "filter-icon-blue");
    under25kFilterBtnElement.setAttribute("id", "filter-icon-blue");


    const filteredArray = current_array.filter(function (el) {
        if (el.minAmount < 25000) {
            return el;
        }
    }).sort(function (a, b) {
        return a.minAmount - b.minAmount;
    })

    current_array = filteredArray;

    renderSmallcases(current_array);
    count++;

    filterHeadingElement.textContent = `Filters(${count})`
})


const under50kFilterBtnElement = document.querySelector(".under50k");

under50kFilterBtnElement.addEventListener("click", function () {
    anyFilterBtnElement.removeAttribute("id", "filter-icon-blue");
    under25kFilterBtnElement.removeAttribute("id", "filter-icon-blue");
    under5kFilterBtnElement.removeAttribute("id", "filter-icon-blue");
    under50kFilterBtnElement.setAttribute("id", "filter-icon-blue");


    const filteredArray = current_array.filter(function (el) {
        if (el.minAmount < 50000) {
            return el;
        }
    }).sort(function (a, b) {
        return a.minAmount - b.minAmount;
    })

    current_array = filteredArray;

    renderSmallcases(current_array);
    count++;

    filterHeadingElement.textContent = `Filters(${count})`
})


// sorting my volatiblity
const lowVolatilityBtnElement = document.querySelector(".low");
console.log(lowVolatilityBtnElement);

lowVolatilityBtnElement.addEventListener("click", function () {
    mediumVolatilityBtnElement.removeAttribute("id", "volatility-btn-blue");
    highVolatilityBtnElement.removeAttribute("id", "volatility-btn-blue");
    lowVolatilityBtnElement.setAttribute("id", "volatility-btn-blue");

    const filteredArray = current_array.filter(function (el) {
        if (el.votalityType === "Low Volatility") {
            return el;
        }
    }).sort(function (a, b) {
        return a.minAmount - b.minAmount;
    })

    current_array = filteredArray;

    renderSmallcases(current_array);
    count++;

    filterHeadingElement.textContent = `Filters(${count})`
})


const mediumVolatilityBtnElement = document.querySelector(".medium");

mediumVolatilityBtnElement.addEventListener("click", function () {
    mediumVolatilityBtnElement.setAttribute("id", "volatility-btn-blue");
    highVolatilityBtnElement.removeAttribute("id", "volatility-btn-blue");
    lowVolatilityBtnElement.removeAttribute("id", "volatility-btn-blue");

    const filteredArray = current_array.filter(function (el) {
        if (el.votalityType === "Med. Volatility") {
            return el;
        }
    }).sort(function (a, b) {
        return a.minAmount - b.minAmount;
    })

    current_array = filteredArray;

    renderSmallcases(current_array);
    count++;

    filterHeadingElement.textContent = `Filters(${count})`
})


const highVolatilityBtnElement = document.querySelector(".high");

highVolatilityBtnElement.addEventListener("click", function () {
    mediumVolatilityBtnElement.removeAttribute("id", "volatility-btn-blue");
    highVolatilityBtnElement.setAttribute("id", "volatility-btn-blue");
    lowVolatilityBtnElement.removeAttribute("id", "volatility-btn-blue");

    const filteredArray = current_array.filter(function (el) {
        if (el.votalityType === "High Volatility") {
            return el;
        }
    }).sort(function (a, b) {
        return a.minAmount - b.minAmount;
    })

    current_array = filteredArray;

    renderSmallcases(current_array);
    count++;

    filterHeadingElement.textContent = `Filters(${count})`
})





function renderSmallcases(arr) {
    smallcaseDiv.innerHTML = "";

    arr.forEach(function (product) {
        const productDiv = document.createElement("div");
        productDiv.className = "product";

        productDiv.addEventListener("click", setItem(product));


        const productmainInfoDiv = document.createElement("div");
        productmainInfoDiv.className = "product-main-info";

        const imageElement = document.createElement("img");
        imageElement.src = product.image;

        const nameElement = document.createElement("p");
        nameElement.textContent = product.name;

        productmainInfoDiv.appendChild(imageElement);
        productmainInfoDiv.appendChild(nameElement);


        const shortInfoElement = document.createElement("p");
        shortInfoElement.className = "product-short-info";
        shortInfoElement.textContent = product.shortDescription;


        const statsDiv = document.createElement("div");
        statsDiv.className = "stats";

        const statDiv1 = document.createElement("div");
        statDiv1.className = "stat-1";

        const minAmountElement = document.createElement("p");
        minAmountElement.textContent = "Min Amount";

        const amountElement = document.createElement("p");

        amountElement.textContent = `₹ ${product.minAmount}`;

        statDiv1.appendChild(minAmountElement);
        statDiv1.appendChild(amountElement);

        const statDiv2 = document.createElement("div");
        statDiv2.className = "stat-2";

        const cagrElement = document.createElement("p");
        cagrElement.textContent = product.cagrYear;

        const cagrRateElement = document.createElement("p");
        cagrRateElement.textContent = `${product.cagr}%`;

        if (product.cagr > 0) {
            cagrRateElement.style.color = "#19af55";
        } else {
            cagrRateElement.style.color = "red";
        }

        statDiv2.appendChild(cagrElement);
        statDiv2.appendChild(cagrRateElement);

        const statDiv3 = document.createElement("div");
        statDiv3.className = "stat-3";

        const volatilityElement = document.createElement("p");
        volatilityElement.textContent = product.votalityType;

        statsDiv.appendChild(statDiv1);
        statsDiv.appendChild(statDiv2);
        statsDiv.appendChild(statDiv3);

        statDiv3.appendChild(volatilityElement);

        productDiv.appendChild(productmainInfoDiv);
        productDiv.appendChild(shortInfoElement);
        productDiv.appendChild(statsDiv);

        smallcaseDiv.appendChild(productDiv);

    })
}

renderSmallcases(current_array);



function setItem(product) {
    return function() {
        const smallCaseDetail = JSON.stringify(product);
        window.localStorage.setItem("smallcase-detail", smallCaseDetail);
        window.location.pathname = "smallcaseDetail/smallcaseDetail.html";
    }
}




// Login and logout functionality

const loginStatus = window.localStorage.getItem("loginStatus");

const loginBtnEl = document.querySelector(".login-p");

if (loginStatus === "true") {
    loginBtnEl.textContent = "Logout";
}


loginBtnEl.addEventListener("click", function() {
    if (loginStatus === "true") {
        loginBtnEl.href = "";
        window.localStorage.setItem("loginStatus", "false");
    }
})